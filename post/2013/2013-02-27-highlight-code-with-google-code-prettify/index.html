<!DOCTYPE html>
<html lang="zhc-cn">
<head>
    <meta charset="utf-8" />
    <meta viewport="width=device-width, initial-scale=1" />

    
    <title>Jekyll中使用google-code-prettify高亮代码 | 天外天 My Site</title>
    

    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/code.github.css">
</head>

<body>
    <div class="container">
        <div class="block-container">
            <div id="header" class="header">
    <div class="header-container">
        <div class="brand">
            <h1 class="u-link">
                <a href="/">天外天 My Site</a>
            </h1>
        </div>
        <div class="nav-container">
            <div class="nav">
                
                <div class="u-link nav-item">
                    <a href="/">home</a>
                </div>
                
                <div class="u-link nav-item">
                    <a href="/tags">tags</a>
                </div>
                
                <div class="u-link nav-item">
                    <a href="https://github.com">project</a>
                </div>
                
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>
            
<div class="block-single">
    <div class="post">    
    <h1 class="post-title">Jekyll中使用google-code-prettify高亮代码</h1>
    <div class="post-meta">
    <span class="post-date">2013.2.27</span>
    
        &middot;
        
        <span class="post-tag u-link">
            <a href="/tags/jekyll">Jekyll</a>
        </span>
        
        <span class="post-tag u-link">
            <a href="/tags/%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE">代码高亮</a>
        </span>
        
        <span class="post-tag u-link">
            <a href="/tags/google-code-prettify">google-code-prettify</a>
        </span>
        
    
</div>
    <div class="post-content">
        <p>这个博客，到现在换了好几个代码高亮的工具，之前的SyntaxHIghlighter虽然漂亮，无奈加载太慢，只能舍弃了。现在用的这个是google-code-prettfy，效果也相当不错。最重要的是，非常小，加载速度比SyntaxHighlighter快得多，而且，可以直接使用markdown的语法去写代码。</p>

<p>首先需要两个文件，prettify.js和prettify.css，自己去官网去下。把这两个放到模板中，如下</p>
<div class="highlight"><pre class="chroma">&lt;link href=&#34;{{ ASSET_PATH }}/google-code-prettify/desert.css&#34; rel=&#34;stylesheet&#34; type=&#34;text/css&#34; media=&#34;all&#34;&gt;
&lt;script type=&#34;text/javascript&#34; src=&#34;{{ ASSET_PATH }}/google-code-prettify/prettify.js&#34;&gt;&lt;/script&gt;</pre></div>
<p>考虑到加载速度，最好js写到文档末尾，body闭合标签之前，css写到头部</p>

<p>之后，还需要加上如下代码，用于识别并高亮代码块，这个需要使用jQuery</p>
<div class="highlight"><pre class="chroma">$(function() {
  window.prettyPrint &amp;&amp; prettyPrint();
});</pre></div>
<p>现在，就可以使用<code>&lt;pre&gt;&lt;/pre&gt;</code>标签进行高亮了，</p>
<div class="highlight"><pre class="chroma">&lt;pre class=&#34;prettyPrint&#34;&gt;
// code here
&lt;/pre&gt;</pre></div>
<p>但这样会有些问题，就是在书写html代码的时候，html标签会被浏览器认为是标签而不是代码的字符。而markdown的语法写的代码其实已经解决了这个问题，所以，我们可以利用如下的js代码，来避免自己用<code>&lt;pre&gt;&lt;/pre&gt;</code>写代码所出现的问题，同样需要jQuery支持</p>
<div class="highlight"><pre class="chroma">$(function() {
  $(&#39;pre&#39;).addClass(&#39;prettyprint linenums&#39;).attr(&#39;style&#39;, &#39;overflow:auto&#39;);
});</pre></div>
<p>这样之后，就没有问题了，可以直接用markdown的前置4空格来写代码了。其中<code>addClass('prettyprint linenums')</code>的<code>linenums</code>是添加行号的意思。默认只显示第5、10、15&hellip;行，可以在css文件中li的格式添加<code>list-style-type: decimal;</code>，以显示全部行号</p>

<p>另外，如果博客中有用bootstrap，其中对<code>pre</code>有如下几句</p>
<div class="highlight"><pre class="chroma">white-space:pre;white-space:pre-wrap;word-break:break-all;word-wrap:break-word;</pre></div>
<p>这会使得pre中的代码自动换行，而不是溢出形成滚动条。如果不希望如此，可以注释掉。就看个人的喜好了。如果是滚动条，默认的滚动太难看，可以修改一下样式，看一下<a href="http://www.javascript100.com/?p=756">这篇文章</a></p>

    </div>
</div>
</div>

<h2 style="color: #777">评论</h2>
<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "codevim" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


            <div id="footer">
    <div class="footer-container">
        <div class="powered-by">Powered by Hugo</div>
        <div class="theme">theme - ink</div>
    </div>
</div>
        </div>
    </div>
</body>
</html>