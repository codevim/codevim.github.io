<!DOCTYPE html>
<html lang="zhc-cn">
<head>
    <meta charset="utf-8" />
    <meta viewport="width=device-width, initial-scale=1" />

    
    <title>在Jekyll中用SyntaxHighlighter高亮代码2 | 天外天 My Site</title>
    

    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/code.github.css">
</head>

<body>
    <div class="container">
        <div class="block-container">
            <div id="header" class="header">
    <div class="header-container">
        <div class="brand">
            <h1 class="u-link">
                <a href="/">天外天 My Site</a>
            </h1>
        </div>
        <div class="nav-container">
            <div class="nav">
                
                <div class="u-link nav-item">
                    <a href="/">home</a>
                </div>
                
                <div class="u-link nav-item">
                    <a href="/tags">tags</a>
                </div>
                
                <div class="u-link nav-item">
                    <a href="https://github.com">project</a>
                </div>
                
            </div>
            <div class="clearfix"></div>
        </div>
    </div>
</div>
            
<div class="block-single">
    <div class="post">    
    <h1 class="post-title">在Jekyll中用SyntaxHighlighter高亮代码2</h1>
    <div class="post-meta">
    <span class="post-date">2013.1.14</span>
    
        &middot;
        
        <span class="post-tag u-link">
            <a href="/tags/jekyll">Jekyll</a>
        </span>
        
        <span class="post-tag u-link">
            <a href="/tags/syntaxhighlighter">SyntaxHighlighter</a>
        </span>
        
        <span class="post-tag u-link">
            <a href="/tags/%E4%BB%A3%E7%A0%81%E9%AB%98%E4%BA%AE">代码高亮</a>
        </span>
        
    
</div>
    <div class="post-content">
        <p>之前有一篇博客是关于在Jekyll中利用SyntaxHighlighter去高亮代码的。不过那篇博客中的方法需要每次都加载所有的js文件，加载速度比较慢。其实，可以利用js动态加载js来实现对于不同的语言加载不同的语法分析文件，从而提高js文件的加载速度。废话不多说了，上代码</p>
<div class="highlight"><pre class="chroma">&lt;script language=&#39;javascript&#39;&gt;
    $(function () {

        var stdname = {
            &#39;bash&#39;: &#39;Bash&#39;,
            &#39;sh&#39;: &#39;Bash&#39;,
            &#39;c&#39;: &#39;Cpp&#39;,
            &#39;cpp&#39;: &#39;Cpp&#39;,
            &#39;cs&#39;: &#39;CSharp&#39;,
            &#39;css&#39;: &#39;Css&#39;,
            &#39;java&#39;: &#39;Java&#39;,
            &#39;js&#39;: &#39;JScript&#39;,
            &#39;php&#39;: &#39;Php&#39;,
            &#39;py&#39;: &#39;Python&#39;,
            &#39;python&#39;: &#39;Python&#39;,
            &#39;rb&#39;: &#39;Ruby&#39;,
            &#39;sql&#39;: &#39;Sql&#39;,
            &#39;vb&#39;: &#39;Vb&#39;,
            &#39;xml&#39;: &#39;Xml&#39;,
            &#39;html&#39;: &#39;Xml&#39;,
            &#39;perl&#39;: &#39;Perl&#39;
        };

        var used = {};

        var $t = $(&#39;pre[class^=brush]&#39;);
        if ($t.length &gt; 0) {
            $(&#39;body&#39;).append(&#39;&lt;script src=&#34;/static/js/syntaxhighlighter/shCore.js&#34; type=&#34;text/javascript&#34;&gt;&lt;/script&gt;&#39;);
        }
        $t.each(function() {
            var lang = stdname[$.trim($(this).attr(&#39;class&#39;).substring(6))];
            if (used[lang]) {
                return;
            }
            used[lang] = true;
            $(&#39;body&#39;).append(&#39;&lt;script type=&#34;text/javascript&#34; src=&#34;/static/js/syntaxhighlighter/shBrush&#39; + lang + &#39;.js&#34;&gt;&lt;/script&gt;&#39;);
        });
        if ($t.length &gt; 0) {
            $(&#39;body&#39;).append(&#39;&lt;script language=&#34;javascript&#34;&gt;SyntaxHighlighter.all();&lt;/script&gt;&#39;);
        }
    });
&lt;/script&gt;</pre></div>
<p>把以上这段代码放在Jekyll模板页的body的最后面即可。</p>

<p>这段代码需要jQuery，我的是1.8.2，不知道低版本的是否可以。此外，shCore.css，shThemeDefault.css文件不是动态加载，所以，这两个文件仍然需要直接放在模板页的头部。</p>

    </div>
</div>
</div>

<h2 style="color: #777">评论</h2>
<div id="disqus_thread"></div>
<script>
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "codevim" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>


            <div id="footer">
    <div class="footer-container">
        <div class="powered-by">Powered by Hugo</div>
        <div class="theme">theme - ink</div>
    </div>
</div>
        </div>
    </div>
</body>
</html>